{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nexports.trackLifecycle = trackLifecycle;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _analytics = require('@aws-amplify/analytics');\n\nvar _analytics2 = _interopRequireDefault(_analytics);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\nvar Default_Track_Events = ['componentDidMount', 'componentDidUpdate', 'compomentWillUnmount', 'compomentDidCatch', 'render'];\n\nfunction trackLifecycle(Comp, trackerName) {\n  var events = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Default_Track_Events;\n  return function (_Component) {\n    (0, _inherits3.default)(WithTrackLifecycle, _Component);\n\n    function WithTrackLifecycle(props) {\n      (0, _classCallCheck3.default)(this, WithTrackLifecycle);\n\n      var _this = (0, _possibleConstructorReturn3.default)(this, (WithTrackLifecycle.__proto__ || Object.getPrototypeOf(WithTrackLifecycle)).call(this, props));\n\n      _this.trackerName = trackerName;\n      _this.trackEvents = events;\n\n      _this.track('constructor');\n\n      return _this;\n    }\n\n    (0, _createClass3.default)(WithTrackLifecycle, [{\n      key: 'track',\n      value: function track(event) {\n        var filtered = this.trackEvents.filter(function (item) {\n          return item === event;\n        });\n\n        if (filtered.length > 0) {\n          if (_analytics2.default && typeof _analytics2.default.record === 'function') {\n            _analytics2.default.record({\n              name: this.trackerName,\n              attributes: {\n                event: event\n              }\n            });\n          } else {\n            throw new Error('No Analytics module found, please ensure @aws-amplify/analytics is imported');\n          }\n        }\n      }\n    }, {\n      key: 'componentWillMount',\n      value: function componentWillMount() {\n        this.track('componentWillMount');\n      }\n    }, {\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        this.track('componentDidMount');\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        this.track('componentWillUnmount');\n      }\n    }, {\n      key: 'componentDidCatch',\n      value: function componentDidCatch() {\n        this.track('componentDidCatch');\n      }\n    }, {\n      key: 'componentWillReceiveProps',\n      value: function componentWillReceiveProps() {\n        this.track('componentWillReceiveProps');\n      }\n    }, {\n      key: 'shouldComponentUpdate',\n      value: function shouldComponentUpdate() {\n        this.track('shouldComponentUpdate');\n        return true;\n      }\n    }, {\n      key: 'componentWillUpdate',\n      value: function componentWillUpdate() {\n        this.track('componentWillUpdate');\n      }\n    }, {\n      key: 'componentDidUpdate',\n      value: function componentDidUpdate() {\n        this.track('componentDidUpdate');\n      }\n    }, {\n      key: 'setState',\n      value: function setState() {\n        this.track('setState');\n      }\n    }, {\n      key: 'forceUpdate',\n      value: function forceUpdate() {\n        this.track('forceUpdate');\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        this.track('render');\n        return _react2.default.createElement(Comp, this.props);\n      }\n    }]);\n    return WithTrackLifecycle;\n  }(_react.Component);\n}","map":null,"metadata":{},"sourceType":"script"}