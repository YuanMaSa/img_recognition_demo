{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _core = require('@aws-amplify/core');\n\nvar _AmplifyUITheme = require('../Amplify-UI/Amplify-UI-Theme');\n\nvar _AmplifyUITheme2 = _interopRequireDefault(_AmplifyUITheme);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar AuthPiece = function (_Component) {\n  (0, _inherits3.default)(AuthPiece, _Component);\n\n  function AuthPiece(props) {\n    (0, _classCallCheck3.default)(this, AuthPiece);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (AuthPiece.__proto__ || Object.getPrototypeOf(AuthPiece)).call(this, props));\n\n    _this.inputs = {};\n    _this._isHidden = true;\n    _this._validAuthStates = [];\n    _this.changeState = _this.changeState.bind(_this);\n    _this.error = _this.error.bind(_this);\n    _this.handleInputChange = _this.handleInputChange.bind(_this);\n    return _this;\n  } // extract username from authData\n\n\n  (0, _createClass3.default)(AuthPiece, [{\n    key: 'usernameFromAuthData',\n    value: function usernameFromAuthData() {\n      var authData = this.props.authData;\n\n      if (!authData) {\n        return '';\n      }\n\n      var username = '';\n\n      if ((typeof authData === 'undefined' ? 'undefined' : (0, _typeof3.default)(authData)) === 'object') {\n        // user object\n        username = authData.user ? authData.user.username : authData.username;\n      } else {\n        username = authData; // username string\n      }\n\n      return username;\n    }\n  }, {\n    key: 'errorMessage',\n    value: function errorMessage(err) {\n      if (typeof err === 'string') {\n        return err;\n      }\n\n      return err.message ? err.message : JSON.stringify(err);\n    }\n  }, {\n    key: 'triggerAuthEvent',\n    value: function triggerAuthEvent(event) {\n      var state = this.props.authState;\n\n      if (this.props.onAuthEvent) {\n        this.props.onAuthEvent(state, event);\n      }\n    }\n  }, {\n    key: 'changeState',\n    value: function changeState(state, data) {\n      if (this.props.onStateChange) {\n        this.props.onStateChange(state, data);\n      }\n\n      this.triggerAuthEvent({\n        type: 'stateChange',\n        data: state\n      });\n    }\n  }, {\n    key: 'error',\n    value: function error(err) {\n      this.triggerAuthEvent({\n        type: 'error',\n        data: this.errorMessage(err)\n      });\n    }\n  }, {\n    key: 'handleInputChange',\n    value: function handleInputChange(evt) {\n      this.inputs = this.inputs || {};\n      var _evt$target = evt.target,\n          name = _evt$target.name,\n          value = _evt$target.value,\n          type = _evt$target.type,\n          checked = _evt$target.checked;\n      var check_type = ['radio', 'checkbox'].includes(type);\n      this.inputs[name] = check_type ? checked : value;\n      this.inputs['checkedValue'] = check_type ? value : null;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (!this._validAuthStates.includes(this.props.authState)) {\n        this._isHidden = true;\n        return null;\n      }\n\n      if (this._isHidden) {\n        this.inputs = {};\n        var track = this.props.track;\n        if (track) track();\n      }\n\n      this._isHidden = false;\n      return this.showComponent(this.props.theme || _AmplifyUITheme2.default);\n    }\n  }, {\n    key: 'showComponent',\n    value: function showComponent(theme) {\n      throw 'You must implement showComponent(theme) and don\\'t forget to set this._validAuthStates.';\n    }\n  }]);\n  return AuthPiece;\n}(_react.Component);\n/*\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\n\n\nexports.default = AuthPiece;","map":null,"metadata":{},"sourceType":"script"}